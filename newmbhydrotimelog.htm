<html>

<head>
<link rel="stylesheet" type="text/css" href="https://lt47.github.io/AAG/mbhydrolog.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
      (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
          m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
      ga('create', 'UA-56318310-1', 'auto');
      ga('send', 'pageview');

</script>
<base target="_top" />

<script>
  geotab.addin.timelog = function (api,state){
   // Initialize required Add-In variables
   var userbtn = document.getElementById("userbutton");
   if (userbtn) {
       userbtn.addEventListener("click", function () {
       document.getElementById("user").value = state.device.id;
       });
   }
   
   var tripstart = document.getElementById("starttrip");
   if (tripstart) {
       tripstart.addEventListener("click", function() {
       document.getElementById("divb").style.display ="block";
       document.getElementById("tripdescription").value=document.getElementById("copytripdescription").value;
       document.getElementById("tripdescription").style.display ="none";
       document.getElementById("copytripdescription").style.display ="block";
       document.getElementById("tripdesc").style.display ="block";
       document.getElementById("loadbutton").style.display ="inline-block";
       document.getElementById("unloadbutton").style.display ="inline-block";
       document.getElementById("drivingbutton").style.display ="inline-block";
       document.getElementById("otherbutton").style.display ="inline-block";
       document.getElementById("divd").style.display ="block";
       document.getElementById("diva").style.display ="none";
       document.getElementById("starttrip").style.display ="none";
       document.getElementById("loadbutton").style.display ="block";
       document.getElementById("unloadbutton").style.display ="block";
       document.getElementById("drivingbutton").style.display ="block";
       document.getElementById("otherbutton").style.display ="block";
       document.getElementById("cancelbuttondiv").style.display ="block";
       });
   }
   
   
   var loadbtn = document.getElementById("loadbutton");
   if (loadbtn) {
       loadbtn.addEventListener("click", function () {
       document.getElementById("userbutton").click();
       document.getElementById("unloadbutton").disabled = true;
       document.getElementById("drivingbutton").disabled = true;
       document.getElementById("otherbutton").disabled = true;
       document.getElementById("unloadbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("unloadbutton").style.color = "#434445";
       document.getElementById("drivingbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("drivingbutton").style.color = "#434445";
       document.getElementById("otherbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("otherbutton").style.color = "#434445";
       document.getElementById("comments").style.display ="block";
       document.getElementById("submit-mbhydrohaulage").style.display ="block";
       document.getElementById("testendtrip").style.display ="block";
       document.getElementById("endtrip-mbhydrohaulage").style.display ="block";
       document.getElementById("activitylabel").style.display ="none";
       document.getElementById("cancelbuttondiv").style.display ="none";
       });
   }
   
   var hideload = document.getElementById("loadstopbutton");
   if (hideload) {
       hideload.addEventListener("click", function () {
       document.getElementById("loadstop").value = getTimeStamp();
       document.getElementById("loadstartbutton").disabled = false;
       document.getElementById("loadstartbutton").style.display ="none";
       document.getElementById("loadstopbutton").style.display ="none";
       document.getElementById("comments").style.display ="none";
       document.getElementById("noreset-mbhydrohaulage").click();
       });
   }
   
   var unloadbtn = document.getElementById("unloadbutton");
   if (unloadbtn) {
       unloadbtn.addEventListener("click", function () {
       document.getElementById("userbutton").click();
       document.getElementById("loadbutton").disabled = true;
       document.getElementById("drivingbutton").disabled = true;
       document.getElementById("otherbutton").disabled = true;
       document.getElementById("loadbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("loadbutton").style.color = "#434445";
       document.getElementById("drivingbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("drivingbutton").style.color = "#434445";
       document.getElementById("otherbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("otherbutton").style.color = "#434445";
       document.getElementById("comments").style.display ="block";
       document.getElementById("submit-mbhydrohaulage").style.display ="block";
       document.getElementById("testendtrip").style.display ="block";
       document.getElementById("endtrip-mbhydrohaulage").style.display ="block";
       document.getElementById("activitylabel").style.display ="none";
       document.getElementById("cancelbuttondiv").style.display ="none";
       });
   }
   
   var hideunload = document.getElementById("unloadstopbutton");
   if (hideunload) {
       hideunload.addEventListener("click", function () {
       document.getElementById("unloadstop").value = getTimeStamp();
       document.getElementById("unloadstartbutton").disabled = false;
       document.getElementById("unloadstartbutton").style.display ="none";
       document.getElementById("unloadstopbutton").style.display ="none";
       document.getElementById("comments").style.display ="none";
       document.getElementById("noreset-mbhydrohaulage").click();
       });   
   }
   
   var drivingbtn = document.getElementById("drivingbutton");
   if (drivingbtn) {
       drivingbtn.addEventListener("click", function () {
       document.getElementById("userbutton").click();
       document.getElementById("unloadbutton").disabled = true;
       document.getElementById("loadbutton").disabled = true;
       document.getElementById("otherbutton").disabled = true;
       document.getElementById("unloadbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("unloadbutton").style.color = "#434445";
       document.getElementById("loadbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("loadbutton").style.color = "#434445";
       document.getElementById("otherbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("otherbutton").style.color = "#434445";
       document.getElementById("comments").style.display ="block";
       document.getElementById("submit-mbhydrohaulage").style.display ="block";
       document.getElementById("testendtrip").style.display ="block";
       document.getElementById("endtrip-mbhydrohaulage").style.display ="block";
       document.getElementById("activitylabel").style.display ="none";
       document.getElementById("cancelbuttondiv").style.display ="none";
       });
   }
   
   var hidedriving = document.getElementById("drivingstopbutton");
   if (hidedriving) {
       hidedriving.addEventListener("click", function () {
       document.getElementById("drivingstop").value = getTimeStamp();
       document.getElementById("drivingstartbutton").disabled = false;
       document.getElementById("drivingstartbutton").style.display ="none";
       document.getElementById("drivingstopbutton").style.display ="none";
       document.getElementById("comments").style.display ="none";
       document.getElementById("noreset-mbhydrohaulage").click();
       });
   }
   
   var otherbtn = document.getElementById("otherbutton");
   if (otherbtn) {
       otherbtn.addEventListener("click", function () {
       document.getElementById("userbutton").click();
       document.getElementById("unloadbutton").disabled = true;
       document.getElementById("loadbutton").disabled = true;
       document.getElementById("otherbutton").disabled = true;
       document.getElementById("unloadbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("unloadbutton").style.color = "#434445";
       document.getElementById("drivingbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("drivingbutton").style.color = "#434445";
       document.getElementById("loadbutton").style.backgroundColor = "#b4b5b8";
       document.getElementById("loadbutton").style.color = "#434445";
       document.getElementById("comments").style.display ="block";
       document.getElementById("submit-mbhydrohaulage").style.display ="block";       
       document.getElementById("submit-mbhydrohaulage").style.backgroundColor ="gray";
       document.getElementById("submit-mbhydrohaulage").disabled =true;
       document.getElementById("testendtrip").style.display ="block";
       document.getElementById("endtrip-mbhydrohaulage").style.display ="block";
       document.getElementById("activitylabel").style.display ="none";
       document.getElementById("cancelbuttondiv").style.display ="none";
       });
   }
   var commentsbox = document.getElementById("comments");
   if (commentsbox) {
       commentsbox.addEventListener("keydown", function () { 
       document.getElementById("submit-mbhydrohaulage").style.backgroundColor ="#ed98b1";
       document.getElementById("submit-mbhydrohaulage").disabled =false;
       });
   }
   var hideother = document.getElementById("otherstopbutton");
   if (hideother) {
       hideother.addEventListener("click", function () {
       document.getElementById("otherstop").value = getTimeStamp();
       document.getElementById("otherstartbutton").disabled = false;
       document.getElementById("otherstartbutton").style.display ="none";
       document.getElementById("otherstopbutton").style.display ="none";
       document.getElementById("comments").style.display ="none";
       document.getElementById("noreset-mbhydrohaulage").click();
       });
   }
   var endact = document.getElementById("submit-mbhydrohaulage");
   if (endact) {
       endact.addEventListener("click", function () {
       document.getElementById("unloadbutton").disabled = false;
       document.getElementById("loadbutton").disabled = false;
       document.getElementById("otherbutton").disabled = false;
       document.getElementById("loadbutton").disabled = false;
       document.getElementById("activitylabel").style.display ="block";
       document.getElementById("comments").style.display ="none";
       document.getElementById("submit-mbhydrohaulage").style.display ="none";
       document.getElementById("activitylabel").style.display ="block";
       document.getElementById("unloadbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("unloadbutton").style.color = "#000000";
       document.getElementById("drivingbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("drivingbutton").style.color = "#000000";
       document.getElementById("loadbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("loadbutton").style.color = "#000000";
       document.getElementById("otherbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("otherbutton").style.color = "#000000";
       });
   }
   var endtrip = document.getElementById("endtrip-mbhydrohaulage");
   if (endtrip) {
       endtrip.addEventListener("click", function () {
       document.getElementById("divb").style.display ="none";
       document.getElementById("unloadbutton").disabled = false;
       document.getElementById("loadbutton").disabled = false;
       document.getElementById("otherbutton").disabled = false;
       document.getElementById("loadbutton").disabled = false;
       document.getElementById("unloadbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("drivingbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("loadbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("otherbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("tripdescription").style.display ="block";
       document.getElementById("copytripdescription").style.display ="none";
       document.getElementById("tripdesc").style.display ="none";
       document.getElementById("loadbutton").style.display ="none";
       document.getElementById("unloadbutton").style.display ="none";
       document.getElementById("drivingbutton").style.display ="none";
       document.getElementById("otherbutton").style.display ="none";
       document.getElementById("divd").style.display ="none";
       document.getElementById("diva").style.display ="block";
       document.getElementById("starttrip").style.display ="block";
       document.getElementById("activitylabel").style.display ="block";
       document.getElementById("comments").style.display ="none";
       document.getElementById("submit-mbhydrohaulage").style.display ="none";
       document.getElementById("endtrip-mbhydrohaulage").style.display ="none";
       document.getElementById("testendtrip").style.display ="none";
       });
   }
var cancelbtn = document.getElementById("cancelbutton");
   if (cancelbtn) {
       cancelbtn.addEventListener("click", function () {
       document.getElementById("divb").style.display ="none";
       document.getElementById("unloadbutton").disabled = false;
       document.getElementById("loadbutton").disabled = false;
       document.getElementById("otherbutton").disabled = false;
       document.getElementById("drivingbutton").disabled = false;
       document.getElementById("unloadbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("drivingbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("loadbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("otherbutton").style.backgroundColor = "#97a5d1";
       document.getElementById("tripdescription").style.display ="block";
       document.getElementById("copytripdescription").style.display ="none";
       document.getElementById("tripdesc").style.display ="none";
       document.getElementById("loadbutton").style.display ="none";
       document.getElementById("unloadbutton").style.display ="none";
       document.getElementById("drivingbutton").style.display ="none";
       document.getElementById("otherbutton").style.display ="none";
       document.getElementById("divd").style.display ="none";
       document.getElementById("diva").style.display ="block";
       document.getElementById("starttrip").style.display ="block";
       document.getElementById("activitylabel").style.display ="block";
       document.getElementById("comments").style.display ="none";
       document.getElementById("submit-mbhydrohaulage").style.display ="none";
       document.getElementById("submit-mbhydrohaulage").style.display ="none";
       document.getElementById("cancelbuttondiv").style.display ="none";
       });
   }
   
   function getTimeStamp() {
       var now = new Date();
       return ((now.getMonth() + 1) + '/' + (now.getDate()) + '/' + now.getFullYear() + " " + now.getHours() + ':' + ((now.getMinutes() < 10) ? ("0" + now.getMinutes()) : (now.getMinutes())) + ':' + ((now.getSeconds() < 10) ? ("0" + now
                     .getSeconds()) : (now.getSeconds())));
    }
   
   var loadstartbtn = document.getElementById("loadbutton");
   if (loadstartbtn) {
       loadstartbtn.addEventListener("click", function (api,state) {
       document.getElementById("loadstart").value = getTimeStamp();
       });
   }
   
   var loadstopbtn = document.getElementById("submit-mbhydrohaulage");
   if (loadstopbtn) {
       loadstopbtn.addEventListener("click", function () {
       document.getElementById("loadstop").value = getTimeStamp();
       });
   }
   var loadstopbtn1 = document.getElementById("endtrip-mbhydrohaulage");
   if (loadstopbtn1) {
       loadstopbtn1.addEventListener("click", function () {
       document.getElementById("loadstop").value = getTimeStamp();
       });
   }
   
   var unloadstartbtn = document.getElementById("unloadbutton");
   if (unloadstartbtn) {
       unloadstartbtn.addEventListener("click", function () {
       document.getElementById("unloadstart").value = getTimeStamp();
       });
   }
   
   var unloadstopbtn = document.getElementById("submit-mbhydrohaulage");
   if (unloadstopbtn) {
       unloadstopbtn.addEventListener("click", function () {
       document.getElementById("unloadstop").value = getTimeStamp();
       });
   }
   var unloadstopbtn1 = document.getElementById("endtrip-mbhydrohaulage");
   if (unloadstopbtn1) {
       unloadstopbtn1.addEventListener("click", function () {
       document.getElementById("unloadstop").value = getTimeStamp();
       });
   }
   
   var drivingstartbtn = document.getElementById("drivingbutton");
   if (drivingstartbtn) {
       drivingstartbtn.addEventListener("click", function () {
       document.getElementById("drivingstart").value = getTimeStamp();
       });
   }
   
   var drivingstopbtn = document.getElementById("submit-mbhydrohaulage");
   if (drivingstopbtn) {
       drivingstopbtn.addEventListener("click", function () {
       document.getElementById("drivingstop").value = getTimeStamp();
       });
   }
   var drivingstopbtn1 = document.getElementById("endtrip-mbhydrohaulage");
   if (drivingstopbtn1) {
       drivingstopbtn1.addEventListener("click", function () {
       document.getElementById("drivingstop").value = getTimeStamp();
       });
   }
   
    var otherstartbtn = document.getElementById("otherbutton");
   if (otherstartbtn) {
       otherstartbtn.addEventListener("click", function () {
       document.getElementById("otherstart").value = getTimeStamp();
       });
   }
   
   var otherstopbtn = document.getElementById("submit-mbhydrohaulage");
   if (otherstopbtn) {
       otherstopbtn.addEventListener("click", function () {
       document.getElementById("otherstop").value = getTimeStamp();
       });
   }
var otherstopbtn1 = document.getElementById("endtrip-mbhydrohaulage");
   if (otherstopbtn1) {
       otherstopbtn1.addEventListener("click", function () {
       document.getElementById("otherstop").value = getTimeStamp();
       });
   }
	  
   $(document).ready(function(){
        $('#tripdescription').keyup(function(){
        $('#copytripdescription').val($(this).val());
      });
    });
	  
   $.fn.serializeObject = function() {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
          if (o[this.name]) {
            if (!o[this.name].push) {
              o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
          } else {
            o[this.name] = this.value || '';
          }
        });
        return o;
      };
   
   var $form = $('form#mbhydrohaulage'),
            url = 'https://script.google.com/macros/s/AKfycbxnq6pZi9vVVgaTz8y4g9Z9X8LtN1koPmeWw3Aizj-NXB2gGpw/exec',

            $submit = $('#submit-mbhydrohaulage').on('click', function(i) {
              i.preventDefault();
              var jqxhr = $.ajax({
                url: url,
                method: "GET",
                dataType: "json",
                data: $form.serializeObject()
              }).done(
                // do something
              );
              $('#comments').val("");
	      $('#loadstart').val("");
              $('#unloadstart').val("");
	      $('#otherstart').val("");
	      $('#drivingstart').val("");
            })

   var $form = $('form#mbhydrohaulage'),
            url1 = 'https://script.google.com/macros/s/AKfycbxnq6pZi9vVVgaTz8y4g9Z9X8LtN1koPmeWw3Aizj-NXB2gGpw/exec',

            $submit = $('#endtrip-mbhydrohaulage').on('click', function(j) {
              j.preventDefault();
              var jqxhr = $.ajax({
                url: url1,
                method: "GET",
                dataType: "json",
                data: $form.serializeObject()
              }).done(
                // do something
              );
	       //submit without resetting the form
              $('#mbhydrohaulage')[0].reset();
            })

   
   
   
   
   return {
    initialize(api, state, callback) {
     callback();
    },
    focus(api, state) {
     // User interface is available
    },
    blur(api, state) {
     // Save any Add-In state
    }
   };
  };
 </script>

 
</head>

<body>

<center>

<form id="mbhydrohaulage" method="POST">
	<div id="tripdesc" style="display:none"><img src="https://drive.google.com/uc?id=1XBfvN90w_QkVJrdgf3CGDlp_kUQfJtRn" style="float:left" height="34" width="60"> <textarea id="copytripdescription" name="copytripdescription" style="color:#434445;font-size:23px;background-color:#D8D8D8;display:none;" rows="1" cols="60" disabled></textarea></div>
	<div id="diva" class="a">
	<label id="tripdescriptionlabel" size="6"><b>Trip description:</b></label><br>
	<textarea id="tripdescription" name="tripdescription" style="font-size:23px;" rows="4" cols="30" placeholder="Enter trip summary"></textarea><br><br>
	<div style="display:inline-block;margin-right:35px;"><label id="billofladinglabel" size="6" style="text-align:left;"><b> Bill of Lading Number(s):</b><br>
	<textarea id="billoflading" name="billoflading" style="font-size:23px;margin-right:30px;" rows="3" cols="18" placeholder="Enter BOL numbers"></textarea></label></div>
	<div style="display:inline-block;margin-left:15px;"><label id="chargetolabel" size="6" style="text-align:left;"><b>Charge to:</b><br>
	<textarea id="chargeto" name="chargeto" style="font-size:23px;" rows="3" cols="18" placeholder="Network - Activity, Order No., Cost Center"></textarea></label></div><br><br>
	<input type="button" id="starttrip" class="starttripbutton" value="Start Trip"><br><br>
	</div>
	<div id="divb" style="display:none;" class="b">
	<div style="display:inline-block;float:left;margin-right:30px;margin-left:15px;"><input id="loadbutton" type="button" class="activitybutton" value="LOAD" style="font-size:23px;display:none;width:164px;"></div>
	<div style="display:inline-block;float:left;"><input id="unloadbutton" type="button" class="activitybutton" value="OFFLOAD" style="font-size:23px;display:none;width:164px;"></div>
	<br><br><br>
	<div style="display:inline-block;float:left;margin-right:30px;margin-left:15px;margin-top:25px;"><input id="drivingbutton" type="button" class="activitybutton" value="DRIVING" style="font-size:23px;display:none;width:164px;"></div>
        <div style="display:inline-block;float:left;margin-top:25px;"><input id="otherbutton" type="button" class="activitybutton" value="OTHER" style="font-size:23px;display:none;width:164px;"></div><br><br>
	</div>
	<div class="d" id="divd" style="display:none;"><br>
	<label id="activitylabel" size="6" style="float:left;">Select your activity to begin</label><br>
	<textarea id="comments" name="comments" style="font-size:23px;display:none;float:left;margin-bottom:10px;" rows="4" cols="30">Comments:&nbsp;&nbsp;&nbsp;</textarea><br>
	<button class="submitbutton endactivitybutton" id="submit-mbhydrohaulage" type="submit" style="color:#B82424;font-size:22px;display:none;width:381px;height:80px;text-align:center;">END ACTIVITY</button><br>
	</div>
	<div class="e" id="cancelbuttondiv" style="margin-top:110px;display:none;">
	<button class="canceltripbutton" id="cancelbutton" type="button" style="font-size:17px;">Cancel Trip</button>
	</div>
	<div class="e" style="margin-top:110px;display:none;" id="testendtrip" >
	<button class="submitbutton widthbutton" id="endtrip-mbhydrohaulage" type="submit" style="font-size:17px;display:none;">End Trip</button>
	</div>
	
       <input type="text" id="loadstart" name="loadstart" style="display:none;">
       <input type="text" id="loadstop" name="loadstop" style="display:none;">
       <input type="text" id="unloadstart" name="unloadstart" style="display:none;">
       <input type="text" id="unloadstop" name="unloadstop" style="display:none;">
       <input type="text" id="drivingstart" name="drivingstart" style="display:none;">
       <input type="text" id="drivingstop" name="drivingstop" style="display:none;">
       <input type="text" id="otherstart" name="otherstart" style="display:none;">
       <input type="text" id="otherstop" name="otherstop" style="display:none;"><br><br>
       <input type="text" id="user" name="user" style="display:none">
       <input id="userbutton" type="button" class="biggerbutton" value="User" style="font-size:23px;display:none;">
       
       

      </form> 
  


</body>

</html>
